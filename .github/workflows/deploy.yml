name: Django App Deployment

on:
  push:
    branches:
      - main  # Trigger the workflow when changes are pushed to the main branch

jobs:
  deploy:
    runs-on: ubuntu-latest

    env:
      REMOTE_USER: ubuntu
      REMOTE_HOST: 10.0.3.92
      REMOTE_APP_DIR: /Django_Chatapp

    steps:
      # Step 1: Checkout the repository
      - name: Debug SSH Connection
        run: |
          echo "Testing SSH connection..."
          ssh -i ${{ secrets.SSH_PRIVATE_KEY }} -o StrictHostKeyChecking=no ${{ env.REMOTE_USER }}@${{ env.REMOTE_HOST }} echo "SSH connected successfully"
